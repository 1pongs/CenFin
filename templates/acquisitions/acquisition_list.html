{% extends "base.html" %}
{% load humanize dict_extras acquisition_tags %}
{% block title %}Acquisitions Â· CENFIN{% endblock %}

{% block content %}
<h1 class="mb-4">Acquisitions</h1>
<div class="d-flex flex-wrap align-items-center gap-2 mb-3">
  <a href="{% url 'acquisitions:acquisition-create' %}" class="btn btn-primary">
    <i class="bi bi-plus-lg me-1"></i>Add Acquisition
  </a>
  <form method="get" class="ms-auto d-flex gap-2">
    <select name="category" class="form-select" style="max-width: 12rem;">
      <option value="">All Categories</option>
      {% for value,label in form.category.field.choices %}
      <option value="{{ value }}" {% if value == current_category %}selected{% endif %}>{{ label }}</option>
      {% endfor %}
    </select>
    <input type="month" name="month" class="form-control" value="{{ current_month }}">
    <button class="btn btn-outline-secondary">Filter</button>
  </form>
</div>

{% if urgent_qs %}
<h4 class="text-danger mb-3"><i class="bi bi-exclamation-triangle-fill me-1"></i>Coming up for sale</h4>
<div class="row row-cols-1 row-cols-md-2 row-cols-lg-3 g-3 mb-4">
  {% for acq in urgent_qs %}
    {% render_acquisition_card acq CARD_FIELDS_BY_CATEGORY|get_item:acq.category urgent=True %}
  {% endfor %}
</div>
{% endif %}

<div class="row row-cols-1 row-cols-md-2 row-cols-lg-3 g-3">
  {% for acq in acquisitions %}
    {% render_acquisition_card acq CARD_FIELDS_BY_CATEGORY|get_item:acq.category %}
  {% empty %}
    <p class="text-center">No acquisitions.</p>
  {% endfor %}
</div>
{% endblock %}