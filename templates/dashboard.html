{% extends "base.html" %}
{% load humanize dict_extras %}
{% block title %}Dashboard · CENFIN{% endblock %}
{% block content %}
<h1 class="mb-4">Dashboard</h1>

<div class="row row-cols-1 row-cols-md-5 g-3">
  {% for label, key, bg in cards %}
    <div class="col">
      <div class="card text-bg-{{ bg }} h-100 text-center">
        <div class="card-body d-flex flex-column justify-content-center">
          <h5 class="card-title">{{ label }}</h5>
          <p class="fs-4 mb-0">
            ₱{{ totals|get_item:key|default_if_none:0|floatformat:2|intcomma }}
          </p>
        </div>
      </div>
    </div>
  {% endfor %}
</div>

<h2 class="mt-5">Latest Transactions</h2>
<table class="table table-striped table-sm align-middle">
  <thead class="table-dark">
  <tr>
    <th>Date</th>
    <th>Description</th>
    <th>From</th>
    <th>To</th>
    <th class="text-end">Amount</th>
  </tr>
</thead>

<tbody>
  {% for t in latest_tx %}
    <tr>
      <td>{{ t.date|date:"M d, Y" }}</td>
      <td>{{ t.description }}</td>
      <td>{{ t.account_source|default_if_none:"-" }}</td>
      <td>{{ t.account_destination|default_if_none:"-" }}</td>
      <td class="text-end">₱{{ t.amount|floatformat:2|intcomma }}</td>
    </tr>
  {% empty %}
    <tr><td colspan="5" class="text-center py-4">No transactions yet.</td></tr>
  {% endfor %}
</tbody>

</table>
{% endblock %}

