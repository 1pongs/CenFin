{% extends "base.html" %}
{% load humanize currency_tags %}
{% block content %}
<h2>Insurance Policies</h2>
<table class="table">
  <tr><th>Policy</th><th>Sum Assured</th><th>Total Premiums</th><th>Cash Value</th></tr>
  {% for ins in object_list %}
  <tr>
    <td><a href="{% url 'insurance:edit' ins.pk %}">{{ ins }}</a></td>
    {% display ins.sum_assured base_currency as sum_disp %}
    <td><span class="amount-display" data-prefix="{{ active_currency_symbol }}" data-decimals="2">{{ sum_disp|floatformat:2|intcomma }}</span></td>
    {% display ins.total_premiums_paid base_currency as prem_disp %}
    <td><span class="amount-display" data-prefix="{{ active_currency_symbol }}" data-decimals="2">{{ prem_disp|floatformat:2|intcomma }}</span></td>
    {% display ins.cash_value base_currency as cash_disp %}
    <td><span class="amount-display" data-prefix="{{ active_currency_symbol }}" data-decimals="2">{{ cash_disp|floatformat:2|intcomma }}</span></td>
  </tr>
  {% empty %}
  <tr><td colspan="4">No policies.</td></tr>
  {% endfor %}
</table>
<a href="{% url 'insurance:create' %}" class="btn btn-primary">Add Policy</a>
{% endblock %}